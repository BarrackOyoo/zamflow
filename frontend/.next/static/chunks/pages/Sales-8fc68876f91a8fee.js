(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[816],{303:(e,a,s)=>{"use strict";s.d(a,{db:()=>c});var r=s(6042),t=s(6559),l=s(2964),d=s(5364);let n={apiKey:d.env.REACT_APP_FIREBASE_API_KEY,authDomain:d.env.REACT_APP_FIREBASE_AUTH_DOMAIN,projectId:d.env.REACT_APP_FIREBASE_PROJECT_ID,storageBucket:d.env.REACT_APP_FIREBASE_STORAGE_BUCKET,messagingSenderId:d.env.REACT_APP_FIREBASE_MESSAGING_SENDER_ID,appId:d.env.REACT_APP_FIREBASE_APP_ID},i=(0,r.Wp)(n);(0,t.xI)(i);let c=(0,l.aU)(i)},383:(e,a,s)=>{"use strict";s.d(a,{A:()=>r});let r=(0,s(7963).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},420:(e,a,s)=>{"use strict";s.d(a,{$:()=>m});var r=s(3576),t=s(5699),l=s(7876),d=s(4232),n=s(2987),i=s(7137),c=s(3243);let o=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),m=d.forwardRef((e,a)=>{var{className:s,variant:d,size:i,asChild:m=!1}=e,u=(0,t._)(e,["className","variant","size","asChild"]);let x=m?n.DX:"button";return(0,l.jsx)(x,(0,r._)({className:(0,c.cn)(o({variant:d,size:i,className:s})),ref:a},u))});m.displayName="Button"},1172:(e,a,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/Sales",function(){return s(9759)}])},2104:(e,a,s)=>{"use strict";s.d(a,{A:()=>r});let r=(0,s(7963).A)("shopping-cart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]])},3243:(e,a,s)=>{"use strict";s.d(a,{cn:()=>l});var r=s(9241),t=s(9573);function l(){for(var e=arguments.length,a=Array(e),s=0;s<e;s++)a[s]=arguments[s];return(0,t.QP)((0,r.$)(a))}},3916:(e,a,s)=>{"use strict";s.d(a,{A:()=>l}),s(7876);var r=s(4232);s(6559),s(2964),s(303);let t=(0,r.createContext)({}),l=()=>{let e=(0,r.useContext)(t);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}},4041:(e,a,s)=>{"use strict";s.d(a,{A:()=>r});let r=(0,s(7963).A)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},4893:(e,a,s)=>{"use strict";s.d(a,{A:()=>r});let r=(0,s(7963).A)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},5069:(e,a,s)=>{"use strict";s.d(a,{A:()=>r});let r=(0,s(7963).A)("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]])},5610:(e,a,s)=>{"use strict";s.d(a,{J:()=>m});var r=s(3576),t=s(5699),l=s(7876),d=s(4232),n=s(9773),i=s(7137),c=s(3243);let o=(0,i.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),m=d.forwardRef((e,a)=>{var{className:s}=e,d=(0,t._)(e,["className"]);return(0,l.jsx)(n.b,(0,r._)({ref:a,className:(0,c.cn)(o(),s)},d))});m.displayName=n.b.displayName},6720:(e,a,s)=>{"use strict";s.d(a,{bq:()=>f,eb:()=>v,gC:()=>g,l6:()=>x,yv:()=>p});var r=s(3576),t=s(2701),l=s(5699),d=s(7876),n=s(4232),i=s(6942),c=s(8725),o=s(6076),m=s(2257),u=s(3243);let x=i.bL;i.YJ;let p=i.WT,f=n.forwardRef((e,a)=>{var{className:s,children:n}=e,o=(0,l._)(e,["className","children"]);return(0,d.jsxs)(i.l9,(0,t._)((0,r._)({ref:a,className:(0,u.cn)("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s)},o),{children:[n,(0,d.jsx)(i.In,{asChild:!0,children:(0,d.jsx)(c.A,{className:"h-4 w-4 opacity-50"})})]}))});f.displayName=i.l9.displayName;let h=n.forwardRef((e,a)=>{var{className:s}=e,n=(0,l._)(e,["className"]);return(0,d.jsx)(i.PP,(0,t._)((0,r._)({ref:a,className:(0,u.cn)("flex cursor-default items-center justify-center py-1",s)},n),{children:(0,d.jsx)(o.A,{className:"h-4 w-4"})}))});h.displayName=i.PP.displayName;let y=n.forwardRef((e,a)=>{var{className:s}=e,n=(0,l._)(e,["className"]);return(0,d.jsx)(i.wn,(0,t._)((0,r._)({ref:a,className:(0,u.cn)("flex cursor-default items-center justify-center py-1",s)},n),{children:(0,d.jsx)(c.A,{className:"h-4 w-4"})}))});y.displayName=i.wn.displayName;let g=n.forwardRef((e,a)=>{var{className:s,children:n,position:c="popper"}=e,o=(0,l._)(e,["className","children","position"]);return(0,d.jsx)(i.ZL,{children:(0,d.jsxs)(i.UC,(0,t._)((0,r._)({ref:a,className:(0,u.cn)("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]","popper"===c&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:c},o),{children:[(0,d.jsx)(h,{}),(0,d.jsx)(i.LM,{className:(0,u.cn)("p-1","popper"===c&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:n}),(0,d.jsx)(y,{})]}))})});g.displayName=i.UC.displayName,n.forwardRef((e,a)=>{var{className:s}=e,t=(0,l._)(e,["className"]);return(0,d.jsx)(i.JU,(0,r._)({ref:a,className:(0,u.cn)("px-2 py-1.5 text-sm font-semibold",s)},t))}).displayName=i.JU.displayName;let v=n.forwardRef((e,a)=>{var{className:s,children:n}=e,c=(0,l._)(e,["className","children"]);return(0,d.jsxs)(i.q7,(0,t._)((0,r._)({ref:a,className:(0,u.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s)},c),{children:[(0,d.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,d.jsx)(i.VF,{children:(0,d.jsx)(m.A,{className:"h-4 w-4"})})}),(0,d.jsx)(i.p4,{children:n})]}))});v.displayName=i.q7.displayName,n.forwardRef((e,a)=>{var{className:s}=e,t=(0,l._)(e,["className"]);return(0,d.jsx)(i.wv,(0,r._)({ref:a,className:(0,u.cn)("-mx-1 my-1 h-px bg-muted",s)},t))}).displayName=i.wv.displayName},8666:(e,a,s)=>{"use strict";s.d(a,{Wu:()=>m,ZB:()=>o,Zp:()=>i,aR:()=>c});var r=s(3576),t=s(5699),l=s(7876),d=s(4232),n=s(3243);let i=d.forwardRef((e,a)=>{var{className:s}=e,d=(0,t._)(e,["className"]);return(0,l.jsx)("div",(0,r._)({ref:a,className:(0,n.cn)("rounded-xl border bg-card text-card-foreground shadow",s)},d))});i.displayName="Card";let c=d.forwardRef((e,a)=>{var{className:s}=e,d=(0,t._)(e,["className"]);return(0,l.jsx)("div",(0,r._)({ref:a,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",s)},d))});c.displayName="CardHeader";let o=d.forwardRef((e,a)=>{var{className:s}=e,d=(0,t._)(e,["className"]);return(0,l.jsx)("div",(0,r._)({ref:a,className:(0,n.cn)("font-semibold leading-none tracking-tight",s)},d))});o.displayName="CardTitle",d.forwardRef((e,a)=>{var{className:s}=e,d=(0,t._)(e,["className"]);return(0,l.jsx)("div",(0,r._)({ref:a,className:(0,n.cn)("text-sm text-muted-foreground",s)},d))}).displayName="CardDescription";let m=d.forwardRef((e,a)=>{var{className:s}=e,d=(0,t._)(e,["className"]);return(0,l.jsx)("div",(0,r._)({ref:a,className:(0,n.cn)("p-6 pt-0",s)},d))});m.displayName="CardContent",d.forwardRef((e,a)=>{var{className:s}=e,d=(0,t._)(e,["className"]);return(0,l.jsx)("div",(0,r._)({ref:a,className:(0,n.cn)("flex items-center p-6 pt-0",s)},d))}).displayName="CardFooter"},8772:(e,a,s)=>{"use strict";s.d(a,{p:()=>i});var r=s(3576),t=s(5699),l=s(7876),d=s(4232),n=s(3243);let i=d.forwardRef((e,a)=>{var{className:s,type:d}=e,i=(0,t._)(e,["className","type"]);return(0,l.jsx)("input",(0,r._)({type:d,className:(0,n.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:a},i))});i.displayName="Input"},9759:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>b});var r=s(3576),t=s(7876),l=s(4232),d=s(3916),n=s(420),i=s(8772),c=s(5610),o=s(8666),m=s(6720),u=s(2964),x=s(303),p=s(9688),f=s(2104),h=s(383),y=s(5069);let g=(0,s(7963).A)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);var v=s(4041),N=s(4893);let b=()=>{let{currentUser:e}=(0,d.A)(),[a,s]=(0,l.useState)([]),[b,j]=(0,l.useState)(""),[w,_]=(0,l.useState)(""),[k,A]=(0,l.useState)(""),[R,E]=(0,l.useState)(!1);(0,l.useEffect)(()=>(0,u.aQ)((0,u.P)((0,u.rJ)(x.db,"products")),e=>{s(e.docs.map(e=>(0,r._)({id:e.id},e.data())))}),[]);let P=async s=>{if(s.preventDefault(),!b||!w||!k)return void p.oR.error("Please fill in all fields");let r=parseInt(w);if(r<=0)return void p.oR.error("Quantity must be greater than 0");let t=a.find(e=>e.id===b);if(!t)return void p.oR.error("Product not found");if(r>t.stock)return void p.oR.error("Insufficient stock. Available: ".concat(t.stock));E(!0);try{let a=r*t.price;await (0,u.gS)((0,u.rJ)(x.db,"sales"),{productId:b,productName:t.name,quantitySold:r,customerName:k.trim(),saleDate:(0,u.O5)(),salespersonId:e.uid,salespersonEmail:e.email,unitPrice:t.price,totalPrice:a});let s=(0,u.H9)(x.db,"products",b);await (0,u.mZ)(s,{stock:(0,u.GV)(-r)}),p.oR.success("Sale recorded successfully!"),j(""),_(""),A("")}catch(e){console.error("Error recording sale:",e),p.oR.error("Failed to record sale")}finally{E(!1)}},S=a.find(e=>e.id===b);return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("div",{className:"bg-gradient-to-r from-green-50 to-emerald-100 dark:from-green-900/20 dark:to-emerald-900/20 rounded-2xl p-6 border border-green-200 dark:border-green-700",children:(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsx)("div",{className:"w-16 h-16 bg-gradient-to-br from-green-500 to-emerald-600 rounded-xl flex items-center justify-center",children:(0,t.jsx)(f.A,{className:"h-8 w-8 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Record New Sale"}),(0,t.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Process customer transactions quickly and efficiently"})]})]})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,t.jsx)("div",{className:"lg:col-span-2",children:(0,t.jsxs)(o.Zp,{className:"glass-effect border-0 shadow-lg",children:[(0,t.jsx)(o.aR,{children:(0,t.jsxs)(o.ZB,{className:"flex items-center space-x-2",children:[(0,t.jsx)(h.A,{className:"h-5 w-5 text-green-600"}),(0,t.jsx)("span",{children:"Sale Information"})]})}),(0,t.jsx)(o.Wu,{children:(0,t.jsxs)("form",{onSubmit:P,className:"space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.J,{htmlFor:"product",children:"Product"}),(0,t.jsxs)(m.l6,{value:b,onValueChange:j,children:[(0,t.jsx)(m.bq,{className:"w-full",children:(0,t.jsx)(m.yv,{placeholder:"Select a product"})}),(0,t.jsx)(m.gC,{children:a.map(e=>(0,t.jsx)(m.eb,{value:e.id,children:(0,t.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,t.jsx)("span",{children:e.name}),(0,t.jsxs)("span",{className:"text-sm text-gray-500 ml-2",children:["Stock: ",e.stock," | $",e.price]})]})},e.id))})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.J,{htmlFor:"quantity",children:"Quantity"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(y.A,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),(0,t.jsx)(i.p,{id:"quantity",type:"number",min:"1",placeholder:"Enter quantity",value:w,onChange:e=>_(e.target.value),className:"pl-10",required:!0})]}),S&&(0,t.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Available stock: ",S.stock]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.J,{htmlFor:"customer",children:"Customer Name"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(g,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),(0,t.jsx)(i.p,{id:"customer",type:"text",placeholder:"Enter customer name",value:k,onChange:e=>A(e.target.value),className:"pl-10",required:!0})]})]}),(0,t.jsx)(n.$,{type:"submit",className:"w-full bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white font-semibold py-2.5 rounded-xl transition-all duration-200",disabled:R,children:R?"Recording Sale...":"Record Sale"})]})})]})}),(0,t.jsx)("div",{className:"space-y-4",children:(0,t.jsxs)(o.Zp,{className:"glass-effect border-0 shadow-lg",children:[(0,t.jsx)(o.aR,{children:(0,t.jsx)(o.ZB,{className:"text-lg",children:"Sale Summary"})}),(0,t.jsx)(o.Wu,{className:"space-y-4",children:S&&w?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"p-4 bg-gray-50 dark:bg-gray-800/50 rounded-lg space-y-3",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Product:"}),(0,t.jsx)("span",{className:"font-medium",children:S.name})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Unit Price:"}),(0,t.jsxs)("span",{className:"font-medium",children:["$",S.price]})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Quantity:"}),(0,t.jsx)("span",{className:"font-medium",children:w})]}),(0,t.jsx)("hr",{className:"border-gray-200 dark:border-gray-700"}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"font-semibold",children:"Total:"}),(0,t.jsxs)("span",{className:"font-bold text-lg text-green-600 dark:text-green-400",children:["$",(S.price*parseInt(w||0)).toFixed(2)]})]})]}),(0,t.jsxs)("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-700",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,t.jsx)(v.A,{className:"h-4 w-4 text-blue-600"}),(0,t.jsx)("span",{className:"font-medium text-blue-800 dark:text-blue-200",children:"Sale Date"})]}),(0,t.jsx)("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]})]}):(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)(N.A,{className:"h-12 w-12 text-gray-300 mx-auto mb-3"}),(0,t.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"Select product and quantity to see summary"})]})})]})})]})]})}},9773:(e,a,s)=>{"use strict";s.d(a,{b:()=>n});var r=s(4232),t=s(6326),l=s(7876),d=r.forwardRef((e,a)=>(0,l.jsx)(t.sG.label,{...e,ref:a,onMouseDown:a=>{a.target.closest("button, input, select, textarea")||(e.onMouseDown?.(a),!a.defaultPrevented&&a.detail>1&&a.preventDefault())}}));d.displayName="Label";var n=d}},e=>{e.O(0,[659,20,840,0,208,689,636,593,792],()=>e(e.s=1172)),_N_E=e.O()}]);